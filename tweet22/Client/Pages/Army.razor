@page "/army"
@inject IUnitService UnitService
@attribute [Authorize]

<h1>@pageTitle</h1>

@if (UnitService.Units.Count > 0)
{
    <table class="table">
        @foreach (var userUnit in UnitService.MyUnits)
        {
            <tr>
                <td>
                    @switch (userUnit.UnitId)
                    {
                        case 1: <img src="img/icons/knight.png" /> break;
                        case 2: <img src="img/icons/archer.png" /> break;
                        case 3: <img src="img/icons/mage.png" /> break;
                        case 4: <img src="img/icons/axe.png" /> break;
                    }
                </td>
                <td>
                    @UnitService.Units.First(unit => unit.Id == userUnit.UnitId).Title
                </td>
                <td>
                    @userUnit.HitPoints HP
                </td>
            </tr>
        }
    </table>
}
                                else
                                {
    <span>Loading units...</span>
                                }


                                @code {
    private string pageTitle = "My Army";

                            protected override async Task OnInitializedAsync()
                            {
                                await UnitService.LoadUnitsAsync();
                            }
                        }

